<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title -->
    <title>Delicious - Food Blog Template | Receipe Post</title>

    <!-- Favicon -->
    <link rel="icon" href="/assets/img/core-img/favicon.ico">

    <!-- Core Stylesheet -->
    <link rel="stylesheet" href="/assets/css/style.css">
 <style>
    .dropdown {
      position: relative;
    }
    .receipe-content{
        padding-bottom: 20px;
    }
    .dropdown input {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
    }
    .dropdown-options {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid #ccc;
      background: #fff;
      z-index: 1000;
      display: none;
    }
    .dropdown-options div {
      padding: 8px;
      cursor: pointer;
    }
    .dropdown-options div:hover {
      background: #f0f0f0;
    }
    .selected-items {
      margin-top: 10px;
    }
    .selected-items span {
      display: inline-block;
      background: #40ba37;
      color: #fff;
      padding: 5px 10px;
      margin: 5px;
      border-radius: 3px;
    }
  </style>
</head>

<body>
    <!-- Preloader -->
    <div id="preloader">
        <i class="circle-preloader"></i>
        <img src="/assets/img/core-img/salad.png" alt="">
    </div>

    <!-- Search Wrapper -->
    <div class="search-wrapper">
        <!-- Close Btn -->
        <div class="close-btn"><i class="fa fa-times" aria-hidden="true"></i></div>

        <div class="container">
            <div class="row">
                <div class="col-12">
                    <form th:action="@{/search}" method="post">
                        <input type="search" name="search" placeholder="Type any keywords...">
                        <button type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- ##### Header Area Start ##### -->
    <header class="header-area">

        <!-- Top Header Area -->
        <div class="top-header-area">
            <div class="container h-100">
                <div class="row h-100 align-items-center justify-content-between">
                    <!-- Breaking News -->
                    <div class="col-12 col-sm-6">
                        <div class="breaking-news">
                            <div id="breakingNewsTicker" class="ticker">
                                <ul>
                                   <li><a href="#">Hello World!</a></li>
                                    <li><a href="#">Welcome to ~ En Cuisine ~</a></li>
                                    <li><a href="#">Enjoy Delicious Meals!</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Top Social Info -->
                    <div class="col-12 col-sm-6">
                        <div class="top-social-info text-right">
                            <a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a>
                            <a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                            <a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                            <a href="#"><i class="fa fa-dribbble" aria-hidden="true"></i></a>
                            <a href="#"><i class="fa fa-behance" aria-hidden="true"></i></a>
                            <a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

         <!-- Navbar Area -->
        <div class="delicious-main-menu">
            <div class="classy-nav-container breakpoint-off">
                <div class="container">
                    <!-- Menu -->
                    <nav class="classy-navbar justify-content-between" id="deliciousNav">

                        <!-- Logo -->
                        <a class="nav-brand" th:href="@{/main}"><img src="/assets/img/EnCuisine_logoFinal.svg" style="width: 100px" alt="En Cuisine logo"></a>

                        <!-- Navbar Toggler -->
                        <div class="classy-navbar-toggler">
                            <span class="navbarToggler"><span></span><span></span><span></span></span>
                        </div>

                        <!-- Menu -->
                        <div class="classy-menu">

                            <!-- close btn -->
                            <div class="classycloseIcon">
                                <div class="cross-wrap"><span class="top"></span><span class="bottom"></span></div>
                            </div>

                            <!-- Nav Start -->
                            <div class="classynav">
                                <ul>
                                    <li><a th:href="@{/main}">Home</a></li>
                                    <li class="active"><a href="#">Custom</a></li>
                                    <li><a href="contact.html">Contact Us</a></li>
                                </ul>

                                <!--  Search Button -->
                                <div class="search-btn">
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                </div>

                            </div>
                            <!-- Nav End -->
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ##### Header Area End ##### -->

    <!-- ##### Breadcumb Area Start ##### -->
    <div class="breadcumb-area bg-img bg-overlay" style="background-image: url(/assets/img/bg-img/breadcumb3.jpg);">
        <div class="container h-100">
            <div class="row h-100 align-items-center">
                <div class="col-12">
                    <div class="breadcumb-text text-center">
                        <h2>Recipe</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ##### Breadcumb Area End ##### -->

    <div class="receipe-post-area section-padding-80">

        <!-- Receipe Post Search -->
        <div class="receipe-post-search mb-80">
            <div class="container">
                <form  th:action="@{/customSearch}" method="post" id="form">
                    <div class="row">
                        <div class="col-12 col-lg-3 me-5">
                            <label >Ingredients</label>
                            <div class="dropdown">
                                <input type="text" class="form-control" name="search" id="search" placeholder="Search...">
                                <div class="dropdown-options" id="options"></div>
                                <div class="selected-items" id="selectedItems"></div>
                                <input type="hidden" name="ingredients">
                            </div>
                        </div>
                        <div class="col-12 col-lg-3">
                            <label>Cuisine</label>
                            <select name="cuisineType" id="cuisineType" size="10" required>
                                <option value="all" selected>All</option>
                                <option th:each="area: ${cuisineType}" th:value="${area}" th:text="${area}">African</option>
                            </select>
                        </div>
                        <div class="col-12 col-lg-3">
                            <label>Category</label>
                            <select name="category" id="category" size="10" required>
                                <option value="all" selected>All</option>
                                <option th:each="cat: ${categories}" th:value="${cat}" th:text="${cat}">15 minutes</option>
                            </select>
                        </div>
                        <div class="col-12 col-lg-3 mt-4 pt-3 text-right">
                            <button type="submit" id="submit" class="btn delicious-btn">Search</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

            <!-- ##### Best Receipe Area Start ##### -->
    <section class="best-receipe-area mt-5">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-heading">
                        <h3>Recipe Recommendations</h3>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Single Best Receipe Area -->
                <div th:if="${recipes.size()==0}" class="col-12 col-sm-6 col-lg-12 text-center"> No recipe found matching search criteria</div>
                <div th:unless="${recipes.size()==0}"  th:each="rec: ${recipes}" class="col-12 col-sm-6 col-lg-4">
                    <a th:href="@{/recipeDetails/{recipeId}(recipeId=${rec.id})}">
                        <div class="single-best-receipe-area mb-30">
                            <!--                            Favourites button-->
                            <div class="favs" style=" position: absolute; bottom: 65px; left: 10px;">
                            </div>
                            <img th:unless="${rec.imageUrl == null}" th:src="${rec.imageUrl}" alt="Meal img">
                            <img th:if="${rec.imageUrl == null}" src="/assets/img/food1.webp" alt="Meal img">

                            <!-- favourites -->


                            <div class="receipe-content px-3">
                                <a>
                                    <h5 style="font-size: 25px; font-weight: 900;" th:text="${rec.name}">Sushi Easy Recipe</h5>
                                </a>
                            </div>
                        </div>
                    </a>

                </div>

            </div></div>
    </section>
    <!-- ##### Best Receipe Area End ##### -->

        
    </div>


    <!-- ##### Follow Us Instagram Area Start ##### -->
    <div class="follow-us-instagram">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h5 style="font-size: 25px;">Follow Us On Social Media</h5>
                </div>
            </div>
        </div>
        <!-- Instagram Feeds -->
        <div class="insta-feeds d-flex flex-wrap">
            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="/assets/img/bg-img/insta1.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                </div>
            </div>

            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="/assets/img/bg-img/insta2.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a>
                </div>
            </div>

            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="/assets/img/bg-img/insta3.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                </div>
            </div>

            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="/assets/img/bg-img/insta4.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                </div>
            </div>

            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="/assets/img/bg-img/insta5.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="#"><i class="fa fa-dribbble" aria-hidden="true"></i></a>
                </div>
            </div>

            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="/assets/img/bg-img/insta6.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="#"><i class="fa fa-behance" aria-hidden="true"></i></a>
                </div>
            </div>

            <!-- Single Insta Feeds -->
            <div class="single-insta-feeds">
                <img src="/assets/img/bg-img/insta7.jpg" alt="">
                <!-- Icon -->
                <div class="insta-icon">
                    <a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
                </div>
            </div>
        </div>
    </div>
    <!-- ##### Follow Us Instagram Area End ##### -->

    <!-- ##### Footer Area Start ##### -->
    <footer class="footer-area">
        <div class="container h-100">
            <div class="row h-100">
                <div class="col-12 h-100 d-flex flex-wrap align-items-center justify-content-between">
                    <!-- Footer Logo -->
                    <div class="footer-logo">
                        <a th:href="@{/index}"><img src="/assets/img/EnCuisine_logoFinal.svg" style="width: 100px" alt="En Cuisine Logo"></a>
                    </div>
                    <!-- Copywrite -->
                    <p>~En Cuisine~ Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved </p>
                </div>
            </div>
        </div>
    </footer>

    <select id="ingredients" hidden>
        <option th:each="ing: ${ingredients}" th:value="${ing}"></option>
    </select>
    <!-- ##### Footer Area Start ##### -->

    <!-- ##### All Javascript Files ##### -->
    <!-- jQuery-2.2.4 js -->
    <script src="/assets/js/jquery/jquery-2.2.4.min.js"></script>
    <!-- Popper js -->
    <script src="/assets/js/bootstrap/popper.min.js"></script>
    <!-- Bootstrap js -->
    <script src="/assets/js/bootstrap/bootstrap.min.js"></script>
    <!-- All Plugins js -->
    <script src="/assets/js/plugins/plugins.js"></script>
    <!-- Active js -->
    <script src="/assets/js/active.js"></script>
<!-- select Script -->
 <script>
    let options = ["Apple", "Banana", "Cherry", "Date", "Elderberry", "Fig", "Grape"];
    let category = document.querySelector("#category")
    let cuisineType = document.querySelector("#cuisineType")
    let form = document.querySelector("#form")
let selectedItems = [];
document.addEventListener("DOMContentLoaded", ()=>{
    options = []
    let ingredients = document.querySelector("#ingredients").querySelectorAll("option")
    ingredients.forEach(ing => options.push(ing.value))
})
const searchInput = document.getElementById("search");
const optionsContainer = document.getElementById("options");
const selectedItemsContainer = document.getElementById("selectedItems");

function renderOptions(filter = "") {
  optionsContainer.innerHTML = "";
  options
    .filter(option => option.toLowerCase().includes(filter.toLowerCase()))
    .forEach(option => {
      const div = document.createElement("div");
      div.textContent = option;
      div.onclick = (e) => {
        selectOption(option);
        optionsContainer.style.display = "none"; // Hide after selection
        searchInput.blur(); // Optional: remove focus
        e.stopPropagation();
      };
      optionsContainer.appendChild(div);
    });
}

function selectOption(option) {
  if (!selectedItems.includes(option)) {
    selectedItems.push(option);
    renderSelectedItems();
  }
}

let selectedIngs = document.getElementsByName("ingredients")[0]

function renderSelectedItems() {
  selectedItemsContainer.innerHTML = "";
    searchInput.value = ''
    selectedIngs.value = ''
  selectedItems.forEach(item => {
    const span = document.createElement("span");
    span.textContent = item;
    selectedItemsContainer.appendChild(span);
    searchInput.value = ''
      selectedIngs.value += item+','
  });
}

// Show options when search is focused
searchInput.addEventListener("focus", () => {
  renderOptions(searchInput.value);
  optionsContainer.style.display = "block";
});

// Hide options when search loses focus (with a slight delay to allow click)
searchInput.addEventListener("blur", () => {
  setTimeout(() => {
    optionsContainer.style.display = "none";
  }, 100);
});

// Filter options as user types
searchInput.addEventListener("input", (e) => renderOptions(e.target.value));

// Optional: Prevent blur when clicking options
optionsContainer.addEventListener("mousedown", (e) => {
  e.preventDefault();
});

renderOptions();

// form.addEventListener()

 </script>

</body>

</html>